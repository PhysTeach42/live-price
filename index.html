<!DOCTYPE html>
<html>
  <head>
    <title>Display Com Ed live price</title>
   
  </head>
  <body>
    <div>
      <h1>Com Ed Live Price</h1>
    </div>
    <div id = "info"></div>
    <script>
      const proxyUrl = 'https://corsproxy.io/?key=a809c415&url=';
      const targetUrl = 'https://hourlypricing.comed.com/api?type=5minutefeed';
      var time = 0;
      var price = 0;
      // retreive json time and price information from ComEd
      // <!-- keys (millisUTC, price)  -->
      const infoFetch = async() => {
        const response = await fetch(proxyUrl + targetUrl);
        const infoJson = await response.json();
        return infoJson;
      }
      // extract most recent time and price from json
      const recent = async() => {
        const data = await infoFetch();
        time = JSON.stringify(data[0].millisUTC);
        price = JSON.stringify(data[0].price);
        return [time, price];
      }
      // display time and price on webpage
      const disp = async() => {
        const info = await recent();
        console.log(info);
        document.getElementById("info").innerText = info;
        
      }
      disp();
      
      
    </script>
    <div>Trial 9</div>
    <div>corsproxy.io</div>
  </body>
</html>
